<!doctype html>
<html lang="en">
 <head>
  <title>Integrated application</title>
 </head>
 <body>
  <div id="identifier"></div>
  <div id="count"></div>
  <iframe id="dynamics"
          src="https://svalyavakilia.github.io:443/iframe-test/dynamics.html">
  </iframe>
  <script type="text/javascript">
   const parameters = new URLSearchParams(document.location.search);
   
   const identifier = parameters.get("identifier");
   
   document.getElementById("identifier").innerText =
    "Identyfikator bieżącej interakcji: " + identifier;
   
   let count = 1;
   
   if (window.localStorage.getItem("count")) {
    count = parseInt(window.localStorage.getItem("count"));
   }
   
   document.getElementById("count").innerText =
    "Liczba, pobrana z local storage: " + count;
   
   window.localStorage.setItem("count", count + 1);
   
   const dynamics = document.getElementById("dynamics");
   
   dynamics.onload = () => {
    dynamics.contentWindow.postMessage(
     { data: identifier }
    );
   };
  </script>
 </body>
</html>