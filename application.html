<!doctype html>
<html lang="en">
 <head>
  <title>Integrated application</title>
  <style type="text/css">
   #greeting {
    font-weight: bold;
   }
  </style>
 </head>
 <body>
  <div id="greeting">
   Witamy w Dynamics!
  </div>
  <div id="identifier"></div>
  <div id="count"></div>
  <iframe id="embedded"
          src="https://svalyavakilia.github.io:443/embedded/embedded.html">
  </iframe>
  <script type="text/javascript">
   const parameters = new URLSearchParams(document.location.search);
   
   const identifier = parameters.get("identifier");
   
   document.getElementById("identifier").innerText =
    "Identyfikator aktualnej interakcji: " + identifier;
   
   let count = 1;
   
   if (window.localStorage.getItem("count")) {
    count = parseInt(window.localStorage.getItem("count"));
   }
   
   document.getElementById("count").innerText =
    "Liczba, pobrana z local storage: " + count;
   
   window.localStorage.setItem("count", count + 1);
   
   const embedded = document.getElementById("embedded");
   
   embedded.onload = () => {
    embedded.contentWindow.postMessage(
     { data: identifier }
    );
   };
  </script>
 </body>
</html>