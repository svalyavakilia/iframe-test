<!doctype html>
<html lang="en">
 <head>
  <title>Integrated application</title>
 </head>
 <body>
  <div id="identifier"></div>
  
  <input id="message" type="text" />
  
  <button onclick="sendMessage()">Send message!</button>
  
  <script type="text/javascript">
   window.addEventListener("load", (event) => {
    console.log("Application has been loaded.");
   });
   window.addEventListener("unload", (event) => {
    console.log("Application has been unloaded.");
   });
   
   const link = "https://svalyavakilia.github.io:443/iframe-test/dynamics.html";
   
   console.log("Before opening a new tab.")
   const popup = window.open(link, "_blank");
   console.log("After opening a new tab.");
   
   function sendMessage() {
    const message = document.getElementById("message").value;
    
    popup.postMessage({ "data": message }, "*");
   }
   
   const parameters = new URLSearchParams(document.location.search);
   
   const identifier = parameters.get("identifier");
   
   document.getElementById("identifier").innerText =
    "Identyfikator bieżącej interakcji: " + identifier;
  </script>
 </body>
</html>